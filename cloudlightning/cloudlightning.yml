tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: TOSCA CloudLightning Root Type
template_name: cloudlightning-root
template_version: 0.1.0-SNAPSHOT
template_author: MarianNeagul


imports:
  - "tosca-normative-types:1.0.0.wd06-SNAPSHOT"

node_types:
  cloudlightning.nodes.Root:
    derived_from: tosca.nodes.Root
    description: The Root Type
    tags:
      icon: images/cloudlightning_icon_circle.png
    requirements:

  cloudlightning.nodes.CLCompute:
    abstract: true
    derived_from: brooklyn.nodes.Compute
    description: Abstract CL compute type
    tags:
      icon: images/cloudlightning_icon_circle.png

  cloudlightning.nodes.CloudLightningCore:
    derived_from: cloudlightning.nodes.Root
    description: CloudLightning Core Type
    properties:
      cloudlightning_requirements_string:
        type: string
        required: false
    capabilities:
      wrapper_node_capabilities: tosca.capabilities.Container

capability_types:
  cloudlightning.capabilities.Root:
    description: Cloudlightning core capability
    derived_from: tosca.capabilities.Root
  cloudlightning.capabilities.ClassAd:
    description: Classad capable capability
    derived_from: cloudlightning.capabilities.Root
  cloudlightning.capabilities.SoSo:
    description: Capability that indicates that the resource is SoSm managed
    derived_from: cloudlightning.capabilities.ClassAd
    properties:
      num_cpus:
        type: integer
        description: Number of required CPUs
        required: false
        constraints:
          - greater_or_equal: 1
        default: 1
      has_gpu:
        type: boolean
        description: GPU needed
        required: false
        default: false
      has_phi:
        type: boolean
        description: Intel Phi Needed
        required: false
        default: false
      is_numascale:
        type: boolean
        description: The resource is a numascale like machine
        required: false
        default: false
  cloudlightning.capabilities.NodeOs:
    description: Try capability
    derived_from: cloudlightning.capabilities.ClassAd
    properties:
      architecture: 
        type: string
        description: Architecture system
        required: false
        default: x86_64
      type:
        type: string
        description: Operating system type
        required: false
        default: linux
      distribution:
        type: string
        description: Distribution system
        required: false
        default: centos
      version:
        type: string
        description: Operating system version
        required: false   
        default: 6.7
  cloudlightning.capabilities.SoSoMaterialised:
    description: Capability to be used by types materialised by SoSm
    derived_from: cloudlightning.capabilities.SoSo
  cloudlightning.capabilities.hardware.HardwareType:
    description: Abstract hardware type definition
    derived_from: cloudlightning.capabilities.Root
  cloudlightning.capabilities.hardware.CPU:
    description: This capability will be used by services implemented for CPU only
    derived_from: cloudlightning.capabilities.hardware.HardwareType
  cloudlightning.capabilities.hardware.GPU:
    description: This capability will be used by services implemented for GPU only
    derived_from: cloudlightning.capabilities.hardware.HardwareType
  cloudlightning.capabilities.hardware.DFE:
    description: This capability will be used by services implemented for DFE only
    derived_from: cloudlightning.capabilities.hardware.HardwareType
  cloudlightning.capabilities.hardware.MIC:
    description: This capability will be used by services implemented for MIC only
    derived_from: cloudlightning.capabilities.hardware.HardwareType
  cloudlightning.capabilities.virt.VirtualizationType:
    description: Abstract Virtualization definition
    derived_from: cloudlightning.capabilities.Root
  cloudlightning.capabilities.virt.Container:
    description: This capability will be used by services implemented with Docker image
    derived_from: cloudlightning.capabilities.virt.VirtualizationType
  cloudlightning.capabilities.virt.VM:
    description: This capability will be used by services implemented for VMs -- optionally we can provide an image-id--.
    derived_from: cloudlightning.capabilities.virt.VirtualizationType
  cloudlightning.capabilities.virt.BareMetal:
    description: This capability will be used by services implemented for BareMetal, i.e., all dependencies must be installed.
    derived_from: cloudlightning.capabilities.virt.VirtualizationType